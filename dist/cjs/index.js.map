{"version":3,"sources":["index.ts"],"sourcesContent":["import indexOfNewline from 'index-of-newline';\n\nconst hasIterator = typeof Symbol !== 'undefined' && Symbol.iterator;\n\n/**\n * Create a newline iterator recognizing CR, LF, and CRLF using the Symbol.iterator interface\n *\n * @param string The string to iterate through\n *\n * ```typescript\n * import newlineIterator from \"newline-iterator\";\n *\n * const iterator = newlineIterator(\"some\\r\\nstring\\ncombination\\r\");\n * const results = [];\n * for (const line of iterator) results.push(line);\n * console.log(results); // [\"some\", \"string\", \"combination\"];\n * ```\n */\nexport default function newlineIterator(string: string): IterableIterator<string> {\n  let offset = 0;\n  const iterator = {\n    next(): IteratorResult<string, boolean> {\n      if (offset >= string.length) return { value: undefined, done: true };\n      let [index, skip] = indexOfNewline(string, offset, true) as number[];\n      if (index < 0) {\n        index = string.length;\n        skip = 0;\n      }\n      const line = string.substr(offset, index - offset);\n      offset = index + skip;\n      return { value: line, done: false };\n    },\n  };\n\n  if (hasIterator) {\n    iterator[Symbol.iterator] = function (): Iterator<string> {\n      return this;\n    };\n  }\n\n  return iterator as IterableIterator<string>;\n}\n"],"names":["newlineIterator","string","offset","iterator","next","length","value","undefined","done","indexOfNewline","index","skip","line","substr","hasIterator","Symbol"],"mappings":"AAAA;;;;kBAkBwBA,eAAe;AAlBZ,IAAA,eAAkB,kCAAlB,kBAAkB,EAAA;AAkB9B,SAASA,eAAe,CAACC,MAAc,EAA4B;IAChF,IAAIC,MAAM,GAAG,CAAC,AAAC;IACf,IAAMC,QAAQ,GAAG;QACfC,IAAI,EAAJA,SAAAA,IAAI,GAAoC;YACtC,IAAIF,MAAM,IAAID,MAAM,CAACI,MAAM,EAAE,OAAO;gBAAEC,KAAK,EAAEC,SAAS;gBAAEC,IAAI,EAAE,IAAI;aAAE,CAAC;YACrE,IAAoBC,GAAoC,kBAApCA,CAAAA,GAAAA,eAAc,AAAsB,CAAA,QAAtB,CAACR,MAAM,EAAEC,MAAM,EAAE,IAAI,CAAC,IAAA,EAAnDQ,KAAK,GAAUD,GAAoC,GAA9C,EAAEE,IAAI,GAAIF,GAAoC,GAAxC,AAAqD;YACrE,IAAIC,KAAK,GAAG,CAAC,EAAE;gBACbA,KAAK,GAAGT,MAAM,CAACI,MAAM,CAAC;gBACtBM,IAAI,GAAG,CAAC,CAAC;aACV;YACD,IAAMC,IAAI,GAAGX,MAAM,CAACY,MAAM,CAACX,MAAM,EAAEQ,KAAK,GAAGR,MAAM,CAAC,AAAC;YACnDA,MAAM,GAAGQ,KAAK,GAAGC,IAAI,CAAC;YACtB,OAAO;gBAAEL,KAAK,EAAEM,IAAI;gBAAEJ,IAAI,EAAE,KAAK;aAAE,CAAC;SACrC;KACF,AAAC;IAEF,IAAIM,WAAW,EAAE;QACfX,QAAQ,CAACY,MAAM,CAACZ,QAAQ,CAAC,GAAG,WAA8B;YACxD,OAAO,IAAI,CAAC;SACb,CAAC;KACH;IAED,OAAOA,QAAQ,CAA6B;CAC7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAvCD,IAAMW,WAAW,GAAG,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACZ,QAAQ,AAAC"}