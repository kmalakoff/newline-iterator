{"version":3,"file":"newline-iterator.js","sources":["../../src/index.ts"],"sourcesContent":["import indexOfNewline from \"index-of-newline\";\n\nconst hasIterator = typeof Symbol !== \"undefined\" && Symbol.iterator;\n\n/**\n * Create a newline iterator recognizing CR, LF, and CRLF using the Symbol.iterator interface\n *\n * @param string The string to iterate through\n *\n * ```typescript\n * import newlineIterator from \"newline-iterator\";\n *\n * const iterator = newlineIterator(\"some\\r\\nstring\\ncombination\\r\");\n * const results = [];\n * for (const line of iterator) results.push(line);\n * console.log(results); // [\"some\", \"string\", \"combination\"];\n * ```\n */\nexport default function newlineIterator(string: string): IterableIterator<string> {\n  let offset = 0;\n  const iterator = {\n    next(): IteratorResult<string, boolean> {\n      if (offset >= string.length) return { value: undefined, done: true };\n      let [index, skip] = indexOfNewline(string, offset, true) as number[];\n      if (index < 0) {\n        index = string.length;\n        skip = 0;\n      }\n      const line = string.substr(offset, index - offset);\n      offset = index + skip;\n      return { value: line, done: false };\n    },\n  };\n\n  if (hasIterator) {\n    iterator[Symbol.iterator] = function (): Iterator<string> {\n      return this;\n    };\n  }\n\n  return iterator as IterableIterator<string>;\n}\n"],"names":["hasIterator","Symbol","iterator","newlineIterator","string","offset","next","length","value","undefined","done","indexOfNewline","index","skip","line","substr"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAEA,IAAMA,WAAW,GAAG,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAAM,CAACC,QAA5D,CAAA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACe,SAASC,eAAT,CAAyBC,MAAzB,EAAmE;IAChF,IAAIC,MAAM,GAAG,CAAb,CAAA;EACA,EAAA,IAAMH,QAAQ,GAAG;EACfI,IAAAA,IADe,EACyB,SAAA,IAAA,GAAA;EACtC,MAAA,IAAID,MAAM,IAAID,MAAM,CAACG,MAArB,EAA6B,OAAO;EAAEC,QAAAA,KAAK,EAAEC,SAAT;EAAoBC,QAAAA,IAAI,EAAE,IAAA;SAAjC,CAAA;;EAC7B,MAAA,IAAA,IAAA,GAAoBC,kCAAc,CAACP,MAAD,EAASC,MAAT,EAAiB,IAAjB,CAAlC;EAAA,UAAA,KAAA,GAAA,cAAA,CAAA,IAAA,EAAA,CAAA,CAAA;EAAA,UAAKO,KAAL,GAAA,KAAA,CAAA,CAAA,CAAA;EAAA,UAAYC,IAAZ,GAAA,KAAA,CAAA,CAAA,CAAA,CAAA;;QACA,IAAID,KAAK,GAAG,CAAZ,EAAe;UACbA,KAAK,GAAGR,MAAM,CAACG,MAAf,CAAA;EACAM,QAAAA,IAAI,GAAG,CAAP,CAAA;EACD,OAAA;;QACD,IAAMC,IAAI,GAAGV,MAAM,CAACW,MAAP,CAAcV,MAAd,EAAsBO,KAAK,GAAGP,MAA9B,CAAb,CAAA;QACAA,MAAM,GAAGO,KAAK,GAAGC,IAAjB,CAAA;QACA,OAAO;EAAEL,QAAAA,KAAK,EAAEM,IAAT;EAAeJ,QAAAA,IAAI,EAAE,KAAA;SAA5B,CAAA;EACD,KAAA;KAXH,CAAA;;EAcA,EAAA,IAAIV,WAAJ,EAAiB;EACfE,IAAAA,QAAQ,CAACD,MAAM,CAACC,QAAR,CAAR,GAA4B,YAA8B;EACxD,MAAA,OAAO,IAAP,CAAA;OADF,CAAA;EAGD,GAAA;;EAED,EAAA,OAAOA,QAAP,CAAA;EACD;;;;;;;;"}