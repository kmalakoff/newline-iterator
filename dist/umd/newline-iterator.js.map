{"version":3,"file":"newline-iterator.js","sources":["../../src/index.ts"],"sourcesContent":["import indexOfNewline from \"index-of-newline\";\n\nexport interface IterableIterator {\n  next(): IteratorResult<string>;\n  [Symbol.iterator](): IteratorResult<string>;\n}\n\n/**\n * Create a newlinw iterator recognizing CR, LF, and CRLF using the Symbol.iterator interface\n *\n * @param string The string to iterate through\n *\n * ```typescript\n * import newlineIterator from \"newline-iterator\";\n *\n * const iterator = newlineIterator(\"some\\r\\nstring\\ncombination\\r\");\n * const results = [];\n * for (const line of iterator) results.push(line);\n * console.log(results); // [\"some\", \"string\", \"combination\"];\n * ```\n */\nexport default function newlineIterator(string: string): IterableIterator {\n  let offset = 0;\n  const iterator = {\n    next: function (): IteratorResult<string, boolean> {\n      if (offset >= string.length) return { value: undefined, done: true };\n      let [index, skip] = indexOfNewline(string, offset, true) as number[];\n      if (index < 0) {\n        index = string.length - offset;\n        skip = 0;\n      }\n      const line = string.substr(offset, index - offset);\n      offset = index + skip;\n      return { value: line, done: false };\n    },\n    [Symbol.iterator]: function (): IteratorResult<string, boolean> {\n      return this;\n    },\n  } as IterableIterator;\n  return iterator;\n}\n"],"names":["newlineIterator","string","offset","iterator","next","length","value","undefined","done","indexOfNewline","index","skip","line","substr","Symbol"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAOA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACe,SAASA,eAAT,CAAyBC,MAAzB,EAA2D;EACxE,MAAIC,MAAM,GAAG,CAAb;;EACA,MAAMC,QAAQ;EACZC,IAAAA,IAAI,EAAE,gBAA6C;EACjD,UAAIF,MAAM,IAAID,MAAM,CAACI,MAArB,EAA6B,OAAO;EAAEC,QAAAA,KAAK,EAAEC,SAAT;EAAoBC,QAAAA,IAAI,EAAE;EAA1B,OAAP;;EAC7B,iBAAoBC,kCAAc,CAACR,MAAD,EAASC,MAAT,EAAiB,IAAjB,CAAlC;EAAA;EAAA,UAAKQ,KAAL;EAAA,UAAYC,IAAZ;;EACA,UAAID,KAAK,GAAG,CAAZ,EAAe;EACbA,QAAAA,KAAK,GAAGT,MAAM,CAACI,MAAP,GAAgBH,MAAxB;EACAS,QAAAA,IAAI,GAAG,CAAP;EACD;;EACD,UAAMC,IAAI,GAAGX,MAAM,CAACY,MAAP,CAAcX,MAAd,EAAsBQ,KAAK,GAAGR,MAA9B,CAAb;EACAA,MAAAA,MAAM,GAAGQ,KAAK,GAAGC,IAAjB;EACA,aAAO;EAAEL,QAAAA,KAAK,EAAEM,IAAT;EAAeJ,QAAAA,IAAI,EAAE;EAArB,OAAP;EACD;EAXW,KAYXM,MAAM,CAACX,QAZI,EAYO,YAA6C;EAC9D,WAAO,IAAP;EACD,GAdW,CAAd;;EAgBA,SAAOA,QAAP;EACD;;;;;;;;"}