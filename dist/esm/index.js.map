{"version":3,"file":"index.js","sources":["../../src/index.ts"],"sourcesContent":["import indexOfNewline from \"index-of-newline\";\n\n/**\n * Create a newlinw iterator recognizing CR, LF, and CRLF using the Symbol.iterator interface\n *\n * @param string The string to iterate through\n *\n * ```typescript\n * import newlineIterator from \"newline-iterator\";\n *\n * const iterator = newlineIterator(\"some\\r\\nstring\\ncombination\\r\");\n * const results = [];\n * for (const line of iterator) results.push(line);\n * console.log(results); // [\"some\", \"string\", \"combination\"];\n * ```\n */\nexport default function newlineIterator(string: string): IterableIterator<string> {\n  let offset = 0;\n  return {\n    next(): IteratorResult<string, boolean> {\n      if (offset >= string.length) return { value: undefined, done: true };\n      let [index, skip] = indexOfNewline(string, offset, true) as number[];\n      if (index < 0) {\n        index = string.length - offset;\n        skip = 0;\n      }\n      const line = string.substr(offset, index - offset);\n      offset = index + skip;\n      return { value: line, done: false };\n    },\n    [Symbol.iterator](): Iterator<string> {\n      return this;\n    },\n  } as IterableIterator<string>;\n}\n"],"names":["newlineIterator","string","offset","next","length","value","undefined","done","index","skip","indexOfNewline","line","substr","Symbol","iterator"],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACe,SAASA,eAAT,CAAyBC,MAAzB,EAAmE;AAChF,MAAIC,MAAM,GAAG,CAAb;AACA,SAAO;AACLC,IAAAA,IAAI,GAAoC;AACtC,UAAID,MAAM,IAAID,MAAM,CAACG,MAArB,EAA6B,OAAO;AAAEC,QAAAA,KAAK,EAAEC,SAAT;AAAoBC,QAAAA,IAAI,EAAE;AAA1B,OAAP;AAC7B,UAAI,CAACC,KAAD,EAAQC,IAAR,IAAgBC,cAAc,CAACT,MAAD,EAASC,MAAT,EAAiB,IAAjB,CAAlC;;AACA,UAAIM,KAAK,GAAG,CAAZ,EAAe;AACbA,QAAAA,KAAK,GAAGP,MAAM,CAACG,MAAP,GAAgBF,MAAxB;AACAO,QAAAA,IAAI,GAAG,CAAP;AACD;;AACD,YAAME,IAAI,GAAGV,MAAM,CAACW,MAAP,CAAcV,MAAd,EAAsBM,KAAK,GAAGN,MAA9B,CAAb;AACAA,MAAAA,MAAM,GAAGM,KAAK,GAAGC,IAAjB;AACA,aAAO;AAAEJ,QAAAA,KAAK,EAAEM,IAAT;AAAeJ,QAAAA,IAAI,EAAE;AAArB,OAAP;AACD,KAXI;;AAYL,KAACM,MAAM,CAACC,QAAR,IAAsC;AACpC,aAAO,IAAP;AACD;;AAdI,GAAP;AAgBD;;;;"}